#!/bin/bash
set -e
pegasus_lite_version_major="5"
pegasus_lite_version_minor="0"
pegasus_lite_version_patch="6"
pegasus_lite_enforce_strict_wp_check="true"
pegasus_lite_version_allow_wp_auto_download="true"


. pegasus-lite-common.sh

pegasus_lite_init

# cleanup in case of failures
trap pegasus_lite_signal_int INT
trap pegasus_lite_signal_term TERM
trap pegasus_lite_unexpected_exit EXIT

printf "\n########################[Pegasus Lite] Setting up workdir ########################\n"  1>&2
# work dir
export pegasus_lite_work_dir=$PWD
pegasus_lite_setup_work_dir

printf "\n##############[Pegasus Lite] Figuring out the worker package to use ##############\n"  1>&2
# figure out the worker package to use
pegasus_lite_worker_package

pegasus_lite_section_start stage_in
printf "\n##################### Setting the xbit for executables staged #####################\n"  1>&2
# set the xbit for any executables staged
/bin/chmod +x mConcatFit

printf "\n##################### Checking file integrity for input files #####################\n"  1>&2
# do file integrity checks
pegasus-integrity --print-timings --verify=stdin 1>&2 << 'eof'
3-fit.000002.000020.txt:3-fit.000013.000015.txt:3-fit.000012.000020.txt:3-fit.000003.000007.txt:3-fit.000007.000036.txt:3-fit.000002.000012.txt:3-fit.000007.000028.txt:3-fit.000003.000023.txt:3-fit.000016.000033.txt:3-fit.000024.000026.txt:3-fit.000006.000033.txt:3-fit.000014.000018.txt:3-fit.000027.000036.txt:3-fit.000013.000023.txt:3-fit.000003.000015.txt:3-fit.000004.000018.txt:3-fit.000005.000030.txt:3-fit.000017.000036.txt:3-fit.000024.000034.txt:3-fit.000025.000029.txt:3-fit.000005.000029.txt:3-fit.000004.000034.txt:3-fit.000010.000013.txt:3-fit.000014.000026.txt:3-fit.000004.000026.txt:3-fit.000015.000029.txt:3-fit.000023.000031.txt:3-fit.000013.000031.txt:3-fit.000011.000016.txt:3-fit.000010.000021.txt:3-fit.000021.000024.txt:3-fit.000003.000031.txt:3-fit.000020.000021.txt:3-fit.000014.000034.txt:3-fit.000001.000016.txt:3-fit.000021.000032.txt:3-fit.000012.000019.txt:3-fit.000022.000027.txt:3-fit.000019.000027.txt:3-fit.000018.000032.txt:3-fit.000001.000032.txt:3-fit.000004.000011.txt:3-fit.000031.000032.txt:3-fit.000028.000032.txt:3-fit.000012.000027.txt:3-fit.000009.000027.txt:3-fit.000008.000016.txt:3-fit.000001.000008.txt:3-fit.000002.000027.txt:3-fit.000007.000021.txt:3-fit.000011.000032.txt:3-fit.000005.000006.txt:3-fit.000017.000021.txt:3-fit.000005.000022.txt:3-fit.000016.000017.txt:3-fit.000006.000017.txt:3-fit.000026.000033.txt:3-fit.000017.000028.txt:3-fit.000027.000028.txt:3-fit.000015.000022.txt:3-fit.000008.000032.txt:3-fit.000010.000036.txt:3-fit.000010.000028.txt:3-fit.000020.000028.txt:3-fit.000007.000013.txt:3-fit.000009.000011.txt:3-stat.tbl:3-fit.000019.000020.txt:3-fit.000009.000020.txt:3-fit.000002.000019.txt:3-fit.000029.000035.txt:3-fit.000008.000024.txt:3-fit.000002.000036.txt:3-fit.000006.000009.txt:3-fit.000018.000024.txt:3-fit.000015.000030.txt:3-fit.000025.000030.txt:3-fit.000002.000004.txt:3-fit.000009.000035.txt:3-fit.000030.000036.txt:3-fit.000009.000018.txt:3-fit.000019.000035.txt:3-fit.000020.000036.txt:3-fit.000024.000035.txt:3-fit.000003.000032.txt:3-fit.000017.000019.txt:3-fit.000004.000035.txt:3-fit.000006.000024.txt:3-fit.000026.000032.txt:3-fit.000014.000027.txt:3-fit.000010.000022.txt:3-fit.000023.000032.txt:3-fit.000009.000034.txt:3-fit.000011.000017.txt:3-fit.000003.000006.txt:3-fit.000015.000021.txt:3-fit.000002.000003.txt:3-fit.000011.000025.txt:3-fit.000021.000033.txt:3-fit.000014.000017.txt:3-fit.000020.000030.txt:3-fit.000022.000028.txt:3-fit.000003.000022.txt:3-fit.000013.000014.txt:3-fit.000002.000028.txt:3-fit.000007.000027.txt:3-fit.000001.000033.txt:3-fit.000025.000028.txt:3-fit.000006.000032.txt:3-fit.000024.000025.txt:3-fit.000017.000035.txt:3-fit.000022.000036.txt:3-fit.000035.000036.txt:3-fit.000008.000015.txt:3-fit.000005.000023.txt:3-fit.000004.000025.txt:3-fit.000001.000015.txt:3-fit.000013.000030.txt:3-fit.000015.000036.txt:3-fit.000006.000018.txt:3-fit.000008.000031.txt:3-fit.000012.000026.txt:3-fit.000002.000013.txt:3-fit.000019.000026.txt:3-fit.000017.000029.txt:3-fit.000004.000010.txt:3-fit.000028.000031.txt:3-fit.000013.000024.txt:3-fit.000001.000009.txt:3-fit.000004.000019.txt:3-fit.000017.000020.txt:3-fit.000016.000034.txt:3-fit.000011.000031.txt:3-fit.000009.000012.txt:3-fit.000020.000035.txt:3-fit.000008.000025.txt:3-fit.000020.000029.txt:3-fit.000006.000010.txt:3-fit.000009.000028.txt:3-fit.000004.000020.txt:3-fit.000011.000024.txt:3-fit.000007.000012.txt:3-fit.000019.000036.txt:3-fit.000022.000035.txt:3-fit.000002.000018.txt:3-fit.000014.000033.txt:3-fit.000029.000034.txt:3-fit.000019.000021.txt:3-fit.000013.000029.txt:3-fit.000002.000035.txt:3-fit.000006.000025.txt:3-fit.000018.000023.txt:3-fit.000006.000008.txt:3-fit.000022.000029.txt:3-fit.000008.000010.txt:3-fit.000015.000031.txt:3-fit.000003.000016.txt:3-fit.000011.000018.txt:3-fit.000021.000026.txt:3-fit.000031.000034.txt:3-fit.000005.000012.txt:3-fit.000029.000033.txt:3-fit.000030.000031.txt:3-fit.000028.000030.txt:3-fit.000001.000034.txt:3-fit.000019.000025.txt:3-fit.000002.000029.txt:3-fit.000018.000022.txt:3-fit.000007.000018.txt:3-fit.000006.000023.txt:3-fit.000017.000026.txt:3-fit.000016.000031.txt:3-fit.000027.000034.txt:3-fit.000007.000026.txt:3-fit.000018.000029.txt:3-fit.000003.000005.txt:3-fit.000005.000020.txt:3-fit.000006.000015.txt:3-fit.000016.000023.txt:3-fit.000002.000014.txt:3-fit.000008.000029.txt:3-fit.000017.000034.txt:3-fit.000026.000035.txt:3-fit.000005.000035.txt:3-fit.000013.000025.txt:3-fit.000011.000014.txt:3-fit.000008.000014.txt:3-fit.000003.000025.txt:3-fit.000009.000013.txt:3-fit.000012.000030.txt:3-fit.000010.000015.txt:3-fit.000014.000036.txt:3-fit.000002.000030.txt:3-fit.000024.000036.txt:3-fit.000001.000014.txt:3-fit.000022.000025.txt:3-fit.000023.000028.txt:3-fit.000033.000036.txt:3-fit.000013.000028.txt:3-fit.000003.000010.txt:3-fit.000012.000025.txt:3-fit.000008.000026.txt:3-fit.000002.000009.txt:3-fit.000010.000027.txt:3-fit.000007.000030.txt:3-fit.000023.000036.txt:3-fit.000015.000024.txt:3-fit.000025.000032.txt:3-fit.000005.000007.txt:3-fit.000009.000029.txt:3-fit.000010.000034.txt:3-fit.000004.000013.txt:3-fit.000014.000021.txt:3-fit.000005.000028.txt:3-fit.000010.000012.txt:3-fit.000005.000015.txt:3-fit.000008.000011.txt:3-fit.000021.000023.txt:3-fit.000011.000023.txt:3-fit.000016.000026.txt:3-fit.000003.000017.txt:3-fit.000032.000034.txt:3-fit.000004.000028.txt:3-fit.000001.000006.txt:3-fit.000002.000021.txt:3-fit.000007.000011.txt:3-fit.000014.000028.txt:3-fit.000012.000017.txt:3-fit.000009.000022.txt:3-fit.000004.000032.txt:3-fit.000022.000034.txt:3-fit.000020.000023.txt:3-fit.000019.000022.txt:3-fit.000002.000017.txt:3-fit.000016.000024.txt:3-fit.000008.000013.txt:3-fit.000004.000027.txt:3-fit.000006.000016.txt:3-fit.000001.000035.txt:3-fit.000005.000021.txt:3-fit.000007.000010.txt:3-fit.000003.000024.txt:3-fit.000005.000013.txt:3-fit.000020.000022.txt:3-fit.000017.000027.txt:3-fit.000010.000014.txt:3-fit.000007.000019.txt:3-fit.000013.000032.txt:3-fit.000014.000035.txt:3-fit.000031.000033.txt:3-fit.000021.000025.txt:3-fit.000029.000032.txt:3-fit.000019.000024.txt:3-fit.000027.000035.txt:3-fit.000032.000036.txt:3-fit.000016.000032.txt:3-fit.000018.000021.txt:3-fit.000015.000023.txt:3-fit.000009.000014.txt:3-fit.000016.000018.txt:3-fit.000006.000022.txt:3-fit.000005.000036.txt:3-fit.000013.000026.txt:3-fit.000003.000030.txt:3-fit.000019.000030.txt:3-fit.000004.000012.txt:3-fit.000027.000029.txt:3-fit.000011.000015.txt:3-fit.000012.000031.txt:3-fit.000010.000020.txt:3-fit.000008.000033.txt:3-fit.000022.000026.txt:3-fit.000021.000031.txt:3-fit.000008.000028.txt:3-fit.000026.000034.txt:3-fit.000017.000033.txt:3-fit.000022.000033.txt:3-fit.000001.000013.txt:3-fit.000002.000016.txt:3-fit.000021.000030.txt:3-fit.000005.000008.txt:3-fit.000004.000005.txt:3-fit.000009.000021.txt:3-fit.000010.000029.txt:3-fit.000010.000035.txt:3-fit.000001.000020.txt:3-fit.000016.000019.txt:3-fit.000012.000024.txt:3-fit.000015.000016.txt:3-fit.000013.000027.txt:3-fit.000026.000027.txt:3-fit.000008.000034.txt:3-fit.000023.000035.txt:3-fit.000001.000029.txt:3-fit.000007.000031.txt:3-fit.000003.000018.txt:3-fit.000004.000033.txt:3-fit.000032.000035.txt:3-fit.000001.000007.txt:3-fit.000014.000029.txt:3-fit.000025.000031.txt:3-fit.000007.000025.txt:3-fit.000002.000022.txt:3-fit.000009.000036.txt:3-fit.000012.000018.txt:3-fit.000014.000020.txt:3-fit.000019.000023.txt:3-fit.000016.000025.txt:3-fit.000023.000029.txt:3-fit.000011.000022.txt:3-fit.000005.000014.txt:3-fit.000013.000033.txt:3-fit.000018.000036.txt:3-fit.000018.000020.txt:3-fit.000009.000015.txt:3-fit.000008.000012.txt:3-fit.000021.000028.txt:3-fit.000030.000033.txt:3-fit.000005.000010.txt:3-fit.000010.000033.txt:3-fit.000011.000028.txt:3-fit.000029.000031.txt:3-fit.000020.000033.txt:3-fit.000001.000028.txt:3-fit.000027.000032.txt:3-fit.000008.000020.txt:3-fit.000017.000032.txt:3-fit.000018.000027.txt:3-fit.000008.000027.txt:3-fit.000019.000031.txt:3-fit.000004.000006.txt:3-fit.000007.000016.txt:3-fit.000006.000021.txt:3-fit.000009.000031.txt:3-fit.000016.000021.txt:3-fit.000015.000017.txt:3-fit.000005.000009.txt:3-fit.000005.000034.txt:3-fit.000002.000008.txt:3-fit.000005.000026.txt:3-fit.000024.000030.txt:3-fit.000001.000021.txt:3-fit.000018.000035.txt:3-fit.000026.000028.txt:3-fit.000008.000035.txt:3-fit.000028.000035.txt:3-fit.000025.000034.txt:3-fit.000013.000019.txt:3-fit.000007.000032.txt:3-fit.000011.000021.txt:3-fit.000005.000017.txt:3-fit.000001.000004.txt:3-fit.000003.000019.txt:3-fit.000015.000034.txt:3-fit.000006.000028.txt:3-fit.000002.000032.txt:3-fit.000022.000032.txt:3-fit.000001.000012.txt:3-fit.000016.000028.txt:3-fit.000012.000015.txt:3-fit.000011.000012.txt:3-fit.000012.000023.txt:3-fit.000014.000030.txt:3-fit.000023.000026.txt:3-fit.000002.000015.txt:3-fit.000004.000030.txt:3-fit.000022.000023.txt:3-fit.000012.000032.txt:3-fit.000023.000034.txt:3-fit.000010.000017.txt:3-fit.000020.000025.txt:3-fit.000016.000030.txt:3-fit.000003.000034.txt:3-fit.000026.000030.txt:3-fit.000006.000013.txt:3-fit.000033.000034.txt:3-fit.000002.000023.txt:3-fit.000010.000025.txt:3-fit.000031.000036.txt:3-fit.000013.000034.txt:3-fit.000003.000004.txt:3-fit.000021.000036.txt:3-fit.000004.000015.txt:3-fit.000007.000024.txt:3-fit.000011.000036.txt:3-fit.000014.000015.txt:3-fit.000001.000036.txt:3-fit.000015.000026.txt:3-fit.000017.000024.txt:3-fit.000025.000026.txt:3-fit.000006.000030.txt:3-fit.000011.000019.txt:3-fit.000019.000032.txt:3-fit.000005.000011.txt:3-fit.000009.000016.txt:3-fit.000009.000024.txt:3-fit.000008.000021.txt:3-fit.000003.000026.txt:3-fit.000002.000031.txt:3-fit.000007.000017.txt:3-fit.000027.000033.txt:3-fit.000029.000030.txt:3-fit.000009.000030.txt:3-fit.000022.000031.txt:3-fit.000018.000028.txt:3-fit.000010.000016.txt:3-fit.000004.000007.txt:3-fit.000016.000022.txt:3-fit.000030.000032.txt:3-fit.000014.000023.txt:3-fit.000021.000027.txt:3-fit.000015.000018.txt:3-fit.000001.000027.txt:3-fit.000007.000033.txt:3-fit.000003.000012.txt:3-fit.000010.000032.txt:3-fit.000011.000013.txt:3-fit.000014.000022.txt:3-fit.000001.000005.txt:3-fit.000026.000029.txt:3-fit.000017.000031.txt:3-fit.000006.000029.txt:3-fit.000004.000014.txt:3-fit.000007.000023.txt:3-fit.000032.000033.txt:3-fit.000001.000022.txt:3-fit.000004.000031.txt:3-fit.000003.000011.txt:3-fit.000022.000024.txt:3-fit.000012.000016.txt:3-fit.000015.000025.txt:3-fit.000006.000020.txt:3-fit.000011.000030.txt:3-fit.000012.000033.txt:3-fit.000005.000016.txt:3-fit.000033.000035.txt:3-fit.000026.000036.txt:3-fit.000011.000020.txt:3-fit.000006.000036.txt:3-fit.000023.000027.txt:3-fit.000002.000007.txt:3-fit.000003.000027.txt:3-fit.000002.000024.txt:3-fit.000010.000026.txt:3-fit.000025.000033.txt:3-fit.000016.000027.txt:3-fit.000013.000018.txt:3-fit.000005.000033.txt:3-fit.000018.000034.txt:3-fit.000013.000035.txt:3-fit.000006.000019.txt:3-fit.000017.000025.txt:3-fit.000014.000016.txt:3-fit.000024.000029.txt:3-fit.000011.000029.txt:3-fit.000001.000011.txt:3-fit.000006.000014.txt:3-fit.000025.000027.txt:3-fit.000004.000029.txt:3-fit.000012.000022.txt:3-fit.000009.000023.txt:3-fit.000006.000031.txt:3-fit.000008.000019.txt:3-fit.000020.000024.txt:3-fit.000008.000036.txt:3-fit.000003.000033.txt:3-fit.000023.000033.txt:3-fit.000024.000031.txt:3-fit.000005.000027.txt:3-fit.000010.000011.txt:3-fit.000031.000035.txt:3-fit.000011.000035.txt:3-fit.000028.000036.txt:3-fit.000013.000020.txt:3-fit.000021.000022.txt:3-fit.000001.000018.txt:3-fit.000020.000031.txt:3-fit.000019.000033.txt:3-fit.000009.000025.txt:3-fit.000010.000023.txt:3-fit.000011.000026.txt:3-fit.000012.000029.txt:3-fit.000011.000034.txt:3-fit.000009.000017.txt:3-fit.000001.000026.txt:3-fit.000008.000022.txt:3-fit.000021.000034.txt:3-fit.000006.000007.txt:3-fit.000010.000031.txt:3-fit.000017.000018.txt:3-fit.000026.000031.txt:3-fit.000018.000030.txt:3-fit.000028.000029.txt:3-fit.000008.000030.txt:3-fit.000015.000020.txt:3-fit.000009.000033.txt:3-fit.000012.000014.txt:3-fit.000003.000013.txt:3-fit.000004.000008.txt:3-fit.000006.000035.txt:3-fit.000003.000009.txt:3-fit.000004.000024.txt:3-fit.000023.000025.txt:3-fit.000007.000034.txt:3-fit.000014.000024.txt:3-fit.000015.000019.txt:3-fit.000016.000035.txt:3-fit.000005.000019.txt:3-fit.000015.000035.txt:3-fit.000034.000036.txt:3-fit.000025.000035.txt:3-fit.000020.000027.txt:3-fit.000004.000036.txt:3-fit.000022.000030.txt:3-fit.000002.000025.txt:3-fit.000008.000018.txt:3-fit.000018.000026.txt:3-fit.000006.000011.txt:3-fit.000007.000015.txt:3-fit.000013.000036.txt:3-fit.000008.000009.txt:3-fit.000019.000029.txt:3-fit.000003.000028.txt:mConcatFit:3-fit.000028.000033.txt:3-fit.000004.000021.txt:3-fit.000018.000033.txt:3-fit.000017.000030.txt:3-fit.000027.000030.txt:3-fit.000003.000036.txt:3-fit.000005.000024.txt:3-fit.000017.000022.txt:3-fit.000020.000034.txt:3-fit.000030.000034.txt:3-fit.000007.000022.txt:3-fit.000013.000021.txt:3-fit.000003.000021.txt:3-fit.000002.000006.txt:3-fit.000015.000028.txt:3-fit.000005.000032.txt:3-fit.000002.000010.txt:3-fit.000015.000032.txt:3-fit.000013.000017.txt:3-fit.000012.000021.txt:3-fit.000024.000028.txt:3-fit.000001.000023.txt:3-fit.000024.000032.txt:3-fit.000006.000026.txt:3-fit.000001.000010.txt:3-fit.000002.000034.txt:3-fit.000010.000019.txt:3-fit.000012.000034.txt:3-fit.000014.000032.txt:3-fit.000034.000035.txt:3-fit.000001.000019.txt:3-fit.000001.000017.txt:3-fit.000009.000032.txt:3-fit.000003.000014.txt:3-fit.000004.000009.txt:3-fit.000001.000025.txt:3-fit.000013.000022.txt:3-fit.000023.000030.txt:3-fit.000012.000028.txt:3-fit.000014.000025.txt:3-fit.000007.000009.txt:3-fit.000002.000011.txt:3-fit.000012.000036.txt:3-fit.000007.000035.txt:3-fit.000011.000033.txt:3-fit.000004.000017.txt:3-fit.000010.000030.txt:3-fit.000025.000036.txt:3-fit.000001.000002.txt:3-fit.000009.000026.txt:3-fit.000020.000032.txt:3-fit.000007.000029.txt:3-fit.000002.000026.txt:3-fit.000003.000008.txt:3-fit.000001.000031.txt:3-fit.000018.000031.txt:3-fit.000004.000023.txt:3-fit.000012.000013.txt:3-fit.000011.000027.txt:3-fit.000014.000019.txt:3-fit.000007.000020.txt:3-fit.000006.000034.txt:3-fit.000005.000018.txt:3-fit.000023.000024.txt:3-fit.000004.000022.txt:3-fit.000001.000030.txt:3-fit.000002.000033.txt:3-fit.000007.000014.txt:3-fit.000028.000034.txt:3-fit.000016.000029.txt:3-fit.000027.000031.txt:3-fit.000014.000031.txt:3-fit.000030.000035.txt:3-fit.000016.000020.txt:3-fit.000017.000023.txt:3-fit.000016.000036.txt:3-fit.000018.000025.txt:3-fit.000019.000028.txt:3-fit.000020.000026.txt:3-fit.000001.000003.txt:3-fit.000005.000025.txt:3-fit.000003.000035.txt:3-fit.000008.000017.txt:3-fit.000015.000033.txt:3-fit.000001.000024.txt:3-fit.000009.000019.txt:3-fit.000006.000027.txt:3-fit.000021.000029.txt:3-fit.000012.000035.txt:3-fit.000007.000008.txt:3-fit.000029.000036.txt:3-fit.000024.000033.txt:3-fit.000002.000005.txt:3-fit.000004.000016.txt:3-fit.000010.000024.txt:3-fit.000010.000018.txt:3-fit.000018.000019.txt:3-fit.000019.000034.txt:3-fit.000003.000020.txt:3-fit.000009.000010.txt:3-fit.000013.000016.txt:3-fit.000015.000027.txt:3-fit.000006.000012.txt:3-fit.000021.000035.txt:3-fit.000003.000029.txt:3-fit.000008.000023.txt:3-fit.000024.000027.txt:3-fit.000005.000031.txt
eof

pegasus_lite_section_end stage_in
set +e
job_ec=0
pegasus_lite_section_start task_execute
printf "\n######################[Pegasus Lite] Executing the user task ######################\n"  1>&2
pegasus-kickstart  -n mConcatFit -N ID0002081 -R condorpool  -s 3-fits.tbl=3-fits.tbl -L montage -T 2023-12-14T00:10:51+00:00 ./mConcatFit 3-stat.tbl 3-fits.tbl .
job_ec=$?
pegasus_lite_section_end task_execute
set -e
pegasus_lite_section_start stage_out
pegasus_lite_section_end stage_out

set -e


# clear the trap, and exit cleanly
trap - EXIT
pegasus_lite_final_exit

